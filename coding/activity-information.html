<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Activity Information</title>
    <link rel="stylesheet" href="admin-styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Progress Steps Styling */
        .progress-steps {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        
        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e9ecef;
            color: #6c757d;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }
        
        .step.active .step-circle {
            background: #28a745;
            color: white;
        }
        
        .step.completed .step-circle {
            background: #28a745;
            color: white;
        }
        
        .step-label {
            font-size: 14px;
            font-weight: 500;
            color: #6c757d;
            text-align: center;
        }
        
        .step.active .step-label {
            color: #28a745;
            font-weight: 600;
        }
        
        .step-connector {
            width: 60px;
            height: 2px;
            background: #e9ecef;
            margin: 0 20px;
            position: relative;
            top: -20px;
        }
        
        .step.active + .step-connector {
            background: #28a745;
        }
        
        .step.completed + .step-connector {
            background: #28a745;
        }
        
        /* Unified Button Design System */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
            height: 44px;
            position: relative;
            overflow: hidden;
        }
        
        .btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn:hover:before {
            left: 100%;
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Primary Button */
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
            transform: translateY(-2px);
        }
        
        /* Secondary Button */
        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.4);
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, #ee82f9 0%, #f4455a 100%);
            box-shadow: 0 6px 20px rgba(240, 147, 251, 0.6);
            transform: translateY(-2px);
        }
        
        /* Success Button */
        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4);
        }
        
        .btn-success:hover {
            background: linear-gradient(135deg, #3d8bfe 0%, #00e6fe 100%);
            box-shadow: 0 6px 20px rgba(79, 172, 254, 0.6);
            transform: translateY(-2px);
        }
        
        /* Warning Button */
        .btn-warning {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(250, 112, 154, 0.4);
        }
        
        .btn-warning:hover {
            background: linear-gradient(135deg, #f95a8a 0%, #fedc2e 100%);
            box-shadow: 0 6px 20px rgba(250, 112, 154, 0.6);
            transform: translateY(-2px);
        }
        
        /* Danger Button */
        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }
        
        .btn-danger:hover {
            background: linear-gradient(135deg, #ff5252 0%, #e5501a 100%);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
            transform: translateY(-2px);
        }
        
        /* Info Button */
        .btn-info {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #333;
            box-shadow: 0 4px 15px rgba(168, 237, 234, 0.4);
        }
        
        .btn-info:hover {
            background: linear-gradient(135deg, #9cebe8 0%, #fdc4d1 100%);
            box-shadow: 0 6px 20px rgba(168, 237, 234, 0.6);
            transform: translateY(-2px);
        }
        
        /* Outline Buttons */
        .btn-outline-primary {
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);
        }
        
        .btn-outline-primary:hover {
            background: #667eea;
            color: white;
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        /* Button Sizes */
        .btn-sm {
            padding: 8px 16px;
            font-size: 12px;
            min-width: 80px;
            height: 36px;
        }
        
        .btn-lg {
            padding: 16px 32px;
            font-size: 16px;
            min-width: 160px;
            height: 52px;
        }
        
        /* Button Groups */
        .btn-group {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .btn-group .btn {
            margin: 0;
        }
        
        /* Icon Buttons */
        .btn-icon {
            width: 44px;
            height: 44px;
            min-width: 44px;
            padding: 0;
            border-radius: 50%;
        }
        
        .btn-icon i {
            font-size: 16px;
        }
        
        /* Back and Next Button Styling */
        .btn-back {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(108, 117, 125, 0.4);
        }
        
        .btn-back:hover {
            background: linear-gradient(135deg, #5a6268 0%, #3d4449 100%);
            box-shadow: 0 6px 20px rgba(108, 117, 125, 0.6);
            transform: translateY(-2px);
        }
        
        .btn-back:active {
            background: linear-gradient(135deg, #495057 0%, #343a40 100%);
            transform: translateY(0);
        }
        
        .btn-next {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }
        
        .btn-next:hover {
            background: linear-gradient(135deg, #218838 0%, #1ea085 100%);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.6);
            transform: translateY(-2px);
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="brand">Amber</h1>
                <p class="subtitle">Dashboard Admin Console</p>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </li>
                    <li class="nav-item">
                        <i class="fas fa-chart-bar"></i>
                        <span>Analytics</span>
                    </li>
                    <li class="nav-item">
                        <i class="fas fa-calendar"></i>
                        <span>Bookings</span>
                    </li>
                    <li class="nav-item">
                        <i class="fas fa-users"></i>
                        <span>Customers</span>
                    </li>
                    <li class="nav-item active">
                        <i class="fas fa-info-circle"></i>
                        <span>Activity Info</span>
                    </li>
                    <li class="nav-item">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="page-header">
                <h1>Admin - Activity Information</h1>
            </div>

            <!-- Progress Steps -->
            <div class="progress-steps">
                <div class="step completed">
                    <div class="step-circle">1</div>
                    <div class="step-label">New Activity</div>
                </div>
                <div class="step-connector"></div>
                <div class="step active">
                    <div class="step-circle">2</div>
                    <div class="step-label">Activity Information</div>
                </div>
                <div class="step-connector"></div>
                <div class="step">
                    <div class="step-circle">3</div>
                    <div class="step-label">Upcoming Activity</div>
                </div>
            </div>

            <div class="content-layout">
                <!-- Activity Information Form -->
                <div class="form-section">
                    <div class="card">
                        <div class="card-header">
                            <h2>Activity Information</h2>
                        </div>
                        <form class="class-form" id="activityForm">
                            <div class="form-group">
                                <label for="activityType">Activity Type</label>
                                <select id="activityType" name="activityType" required>
                                    <option value="">Select Activity Type</option>
                                    <option value="yoga">Yoga</option>
                                    <option value="pilates">Pilates</option>
                                    <option value="dance">Dance</option>
                                    <option value="fitness">Fitness</option>
                                    <option value="martial-arts">Martial Arts</option>
                                    <option value="swimming">Swimming</option>
                                    <option value="weaving">Weaving</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="activityName">Activity Name</label>
                                <input type="text" id="activityName" name="activityName" placeholder="e.g., Zumba Dance, Hatha Yoga, Morning Pilates" required>
                                <small class="form-help">Enter the main activity name</small>
                            </div>

                            <div class="form-group">
                                <label for="activitySubtitle">Activity Subtitle</label>
                                <input type="text" id="activitySubtitle" name="activitySubtitle" placeholder="e.g., High-energy dance fitness that's fun and effective">
                                <small class="form-help">Enter a catchy subtitle or tagline</small>
                            </div>

                            <div class="form-group">
                                <label for="activityDescription">Description</label>
                                <textarea id="activityDescription" name="activityDescription" rows="4" placeholder="e.g., Experience the joy of dance while getting an amazing workout! Our Zumba classes combine Latin and international music with easy-to-follow dance moves. Perfect for all fitness levels - no dance experience required!" required></textarea>
                            </div>

                            <div class="form-group">
                                <label for="danceStyles">Dance Styles (for Dance activities)</label>
                                <input type="text" id="danceStyles" name="danceStyles" placeholder="e.g., Latin, Salsa, Merengue, Reggaeton">
                                <small class="form-help">Enter dance styles separated by commas (only for dance activities)</small>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="duration">Duration (minutes)</label>
                                    <input type="number" id="duration" name="duration" min="1" max="480" value="45" required>
                                </div>
                                <div class="form-group">
                                    <label for="maxParticipants">Max Participants</label>
                                    <input type="number" id="maxParticipants" name="maxParticipants" min="1" max="100" value="8" required>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="coachName">Coach Name</label>
                                    <input type="text" id="coachName" name="coachName" placeholder="e.g., Sarah Johnson, Mike Chen" required>
                                </div>
                                <div class="form-group">
                                    <label for="location">Location</label>
                                    <input type="text" id="location" name="location" placeholder="e.g., Adeline Studio">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="price">Price</label>
                                <input type="text" id="price" name="price" placeholder="e.g., $25 per class, $100 per month" required>
                                <small class="form-help">Enter the pricing information for this activity</small>
                            </div>

                            <div class="form-group">
                                <label for="activityImage">Upload Image</label>
                                <div class="upload-area" id="uploadArea">
                                    <i class="fas fa-arrow-up"></i>
                                    <p>Upload Activity Image</p>
                                    <input type="file" id="activityImage" name="image" accept="image/*" hidden>
                                </div>
                            </div>


                        </form>
                    </div>
                </div>

                <!-- Preview Section -->
                <div class="preview-section">
                    <div class="card">
                        <div class="card-header">
                            <h2>Preview</h2>
                        </div>
                        <div class="preview-content">
                            <div class="activity-preview-page" id="previewActivity">
                                <!-- Banner Image Section -->
                                <div class="banner-section">
                                    <div class="banner-image" id="previewImage">
                                        <div class="banner-overlay">
                                            <div class="banner-subtitle" id="previewBannerSubtitle">High-energy dance fitness that's fun and effective</div>
                                            <div class="banner-title" id="previewBannerTitle">Zumba Dance</div>
                                        </div>
                                        <div class="banner-placeholder">
                                            <i class="fas fa-image"></i>
                                            <p>No image uploaded</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Introduction Section -->
                                <div class="intro-section">
                                    <h2 class="intro-title" id="previewIntroTitle">Join Our Dance Fitness Classes</h2>
                                    <p class="intro-description" id="previewIntroDescription">Get your heart pumping and your body moving with our energetic Zumba sessions.</p>
                                </div>

                                <!-- Activity Details Card -->
                                <div class="activity-details-card">
                                    <h3 class="details-title" id="previewDetailsTitle">Dynamic Dance Workout</h3>
                                    
                                    <div class="details-description" id="previewDescription">
                                        <p>Enter a description about the activity</p>
                                        <p>Perfect for all fitness levels - no dance experience required!</p>
                                    </div>

                                    <!-- Key Information List -->
                                    <div class="info-list">
                                        <div class="info-item">
                                            <span class="info-label">Dance Styles:</span>
                                            <span class="info-value" id="previewDanceStyles">Latin, Salsa, Merengue, Reggaeton</span>
                                        </div>
                                        <div class="info-item">
                                            <span class="info-label">Duration:</span>
                                            <span class="info-value" id="previewDuration">45 minutes</span>
                                        </div>
                                        <div class="info-item">
                                            <span class="info-label">Max Participants:</span>
                                            <span class="info-value" id="previewCapacity">8 people</span>
                                        </div>
                                        <div class="info-item">
                                            <span class="info-label">Coach:</span>
                                            <span class="info-value" id="previewCoachName">Sarah Johnson</span>
                                        </div>
                                        <div class="info-item">
                                            <span class="info-label">Location:</span>
                                            <span class="info-value" id="previewLocation">Adeline Studio</span>
                                        </div>
                                        <div class="info-item">
                                            <span class="info-label">Price:</span>
                                            <span class="info-value" id="previewPrice">$25 per class</span>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button type="button" class="btn btn-danger" id="cancelBtn">
                    <i class="fas fa-times"></i>
                    Cancel
                </button>
                <button type="button" class="btn btn-back" id="backBtn" onclick="goBack()">
                    <i class="fas fa-arrow-left"></i>
                    Back
                </button>
                <button type="button" class="btn btn-warning" id="saveBtn">
                    <i class="fas fa-save"></i>
                    Save Activity
                </button>
                <button type="button" class="btn btn-next" id="nextBtn" onclick="goNext()">
                    Next Step
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </main>
    </div>

    <script src="activity-information-script.js"></script>
    <script>
        // Add Back and Next button functionality
        // Use setTimeout to ensure our script runs after the external script
        setTimeout(function() {
            // Function to save form data
            function saveFormData() {
                const formData = {
                    activityTitle: document.getElementById('activityTitle').value,
                    coachName: document.getElementById('coachName').value,
                    price: document.getElementById('price').value,
                    location: document.getElementById('location').value,
                    // Include previous step data
                    ...JSON.parse(localStorage.getItem('activityFormData') || '{}')
                };
                localStorage.setItem('activityFormData', JSON.stringify(formData));
            }
            
            // Function to load form data
            function loadFormData() {
                const savedData = localStorage.getItem('activityFormData');
                if (savedData) {
                    const formData = JSON.parse(savedData);
                    
                    // Auto-fill Activity Type, Name, and Description from previous step
                    if (formData.activityType) {
                        // Set activity type if there's a matching field
                        const activityTypeField = document.getElementById('activityType');
                        if (activityTypeField) activityTypeField.value = formData.activityType;
                    }
                    
                    if (formData.className) {
                        // Set activity title to class name from previous step
                        document.getElementById('activityTitle').value = formData.className;
                    }
                    
                    if (formData.description) {
                        // Set description from previous step
                        const descriptionField = document.getElementById('description');
                        if (descriptionField) descriptionField.value = formData.description;
                    }
                    
                    // Load other saved data
                    if (formData.activityTitle) document.getElementById('activityTitle').value = formData.activityTitle;
                    if (formData.coachName) document.getElementById('coachName').value = formData.coachName;
                    if (formData.price) document.getElementById('price').value = formData.price;
                    if (formData.location) document.getElementById('location').value = formData.location;
                }
            }
            
            // Load saved data when page loads
            loadFormData();
            
            // Test function to verify button works
            function testBackButton() {
                console.log('Testing back button...');
                const backBtn = document.getElementById('backBtn');
                if (backBtn) {
                    console.log('Back button element:', backBtn);
                    console.log('Back button disabled:', backBtn.disabled);
                    console.log('Back button style:', window.getComputedStyle(backBtn));
                }
            }
            
            // Run test after a short delay
            setTimeout(testBackButton, 200);
            
            // Save data on any input change
            document.getElementById('activityTitle').addEventListener('input', saveFormData);
            document.getElementById('coachName').addEventListener('input', saveFormData);
            document.getElementById('price').addEventListener('input', saveFormData);
            document.getElementById('location').addEventListener('input', saveFormData);
            
            // Back Button functionality - Use multiple approaches to ensure it works
            const backBtn = document.getElementById('backBtn');
            console.log('Back button found:', backBtn); // Debug log
            
            if (backBtn) {
                // Remove any existing event listeners
                backBtn.onclick = null;
                
                // Add click event listener
                backBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Back button clicked'); // Debug log
                    try {
                        saveFormData(); // Save before going back
                        console.log('Data saved, navigating to admin-create-class.html');
                        window.location.href = 'admin-create-class.html';
                    } catch (error) {
                        console.error('Error during navigation:', error);
                        // Fallback navigation
                        window.location.href = 'admin-create-class.html';
                    }
                });
                
                // Also add onclick as backup
                backBtn.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Back button clicked (onclick)'); // Debug log
                    try {
                        saveFormData(); // Save before going back
                        console.log('Data saved, navigating to admin-create-class.html');
                        window.location.href = 'admin-create-class.html';
                    } catch (error) {
                        console.error('Error during navigation:', error);
                        // Fallback navigation
                        window.location.href = 'admin-create-class.html';
                    }
                };
            } else {
                console.error('Back button not found!');
            }
            
            // Next Step Button functionality
            const nextBtn = document.getElementById('nextBtn');
            if (nextBtn) {
                // Ensure button type is button to prevent form submission
                nextBtn.type = 'button';
                
                nextBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Next button clicked'); // Debug log
                    
                    // Validate form before proceeding
                    const activityTitle = document.getElementById('activityTitle').value;
                    const coachName = document.getElementById('coachName').value;
                    const price = document.getElementById('price').value;
                    
                    if (!activityTitle || !coachName || !price) {
                        alert('Please fill in all required fields before proceeding to the next step.');
                        return;
                    }
                    
                    saveFormData(); // Save form data
                    console.log('Data saved, navigating to announcement.html');
                    window.location.href = 'announcement.html';
                });
                
                // Also add onclick as backup
                nextBtn.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Next button clicked (onclick)'); // Debug log
                    
                    // Validate form before proceeding
                    const activityTitle = document.getElementById('activityTitle').value;
                    const coachName = document.getElementById('coachName').value;
                    const price = document.getElementById('price').value;
                    
                    if (!activityTitle || !coachName || !price) {
                        alert('Please fill in all required fields before proceeding to the next step.');
                        return;
                    }
                    
                    saveFormData(); // Save form data
                    console.log('Data saved, navigating to announcement.html');
                    window.location.href = 'announcement.html';
                };
            } else {
                console.error('Next button not found!');
            }
        }, 100); // Run after 100ms to ensure external script has loaded
        
        // Global function for onclick attribute
        function goBack() {
            console.log('goBack() function called');
            try {
                // Try to save data first
                const formData = {
                    activityTitle: document.getElementById('activityTitle').value,
                    coachName: document.getElementById('coachName').value,
                    price: document.getElementById('price').value,
                    location: document.getElementById('location').value,
                    ...JSON.parse(localStorage.getItem('activityFormData') || '{}')
                };
                localStorage.setItem('activityFormData', JSON.stringify(formData));
                console.log('Data saved, navigating to admin-create-class.html');
            } catch (error) {
                console.error('Error saving data:', error);
            }
            
            // Navigate back
            window.location.href = 'admin-create-class.html';
        }
        
        // Global function for next button
        function goNext() {
            console.log('goNext() function called');
            try {
                // Validate form before proceeding
                const activityTitle = document.getElementById('activityTitle').value;
                const coachName = document.getElementById('coachName').value;
                const price = document.getElementById('price').value;
                
                if (!activityTitle || !coachName || !price) {
                    alert('Please fill in all required fields before proceeding to the next step.');
                    return;
                }
                
                // Try to save data first
                const formData = {
                    activityTitle: activityTitle,
                    coachName: coachName,
                    price: price,
                    location: document.getElementById('location').value,
                    ...JSON.parse(localStorage.getItem('activityFormData') || '{}')
                };
                localStorage.setItem('activityFormData', JSON.stringify(formData));
                console.log('Data saved, navigating to announcement.html');
            } catch (error) {
                console.error('Error saving data:', error);
            }
            
            // Navigate to next step
            window.location.href = 'announcement.html';
        }
    </script>
</body>
</html>
