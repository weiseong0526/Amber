<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visitor Records Management</title>
    <link rel="stylesheet" href="admin-styles.css">
    <link rel="stylesheet" href="visitor-records-styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="brand">Amber</h1>
                <p class="subtitle">Dashboard Admin Console</p>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </li>
                    <li class="nav-item active">
                        <i class="fas fa-chart-bar"></i>
                        <span>Visitor Records</span>
                    </li>
                    <li class="nav-item">
                        <i class="fas fa-calendar-check"></i>
                        <span>Bookings</span>
                    </li>
                    <li class="nav-item">
                        <i class="fas fa-users"></i>
                        <span>Customers</span>
                    </li>
                    <li class="nav-item">
                        <i class="fas fa-info-circle"></i>
                        <span>Activity Info</span>
                    </li>
                    <li class="nav-item">
                        <i class="fas fa-bullhorn"></i>
                        <span>Announcements</span>
                    </li>
                    <li class="nav-item">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <!-- Page Header -->
                <div class="page-header">
                    <h1>Admin Visitor Records Management</h1>
                    <div class="header-actions">
                        <div class="search-container">
                            <i class="fas fa-search"></i>
                            <input type="text" id="searchInput" placeholder="Search visitor by name or email...">
                        </div>
                        <button class="btn-primary" onclick="visitorManager.openAddVisitorModal()">
                            <i class="fas fa-plus"></i> Add Visitor
                        </button>
                        <button class="btn-secondary" onclick="visitorManager.resetData()">
                            <i class="fas fa-refresh"></i> Reset Data
                        </button>
                    </div>
                </div>

                <!-- Dashboard Stats -->
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalVisitors">0</h3>
                            <p>Total Visitors</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-user-check"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="registeredVisitors">0</h3>
                            <p>Registered</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-user-clock"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="unregisteredVisitors">0</h3>
                            <p>Unregistered</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-day"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="todayVisitors">0</h3>
                            <p>Today</p>
                        </div>
                    </div>
                </div>

                <!-- Filter Controls -->
                <div class="filter-controls">
                    <div class="filter-group">
                        <label for="activityFilter">Filter by Type:</label>
                        <select id="typeFilter" onchange="visitorManager.applyFilters()">
                            <option value="">All Types</option>
                            <option value="registered">Registered</option>
                            <option value="unregistered">Unregistered</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="statusFilter">Filter by Source:</label>
                        <select id="sourceFilter" onchange="visitorManager.applyFilters()">
                            <option value="">All Sources</option>
                            <option value="website">Website</option>
                            <option value="social_media">Social Media</option>
                            <option value="referral">Referral</option>
                            <option value="walk_in">Walk-in</option>
                            <option value="event">Event</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="dateFilter">Filter by Date:</label>
                        <select id="dateFilter" onchange="visitorManager.applyFilters()">
                            <option value="">All Dates</option>
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                        </select>
                    </div>
                    <button class="btn-clear-filters" onclick="visitorManager.clearFilters()">
                        <i class="fas fa-times"></i> Clear Filters
                    </button>
                </div>

                <!-- Visitor Records Section -->
                <div class="visitor-records-section">
                    <div class="section-header">
                        <h2><i class="fas fa-table"></i> Showing Visitor Records</h2>
                        <div class="section-actions">
                            <button class="btn-export" onclick="visitorManager.exportData()">
                                <i class="fas fa-download"></i> Export
                            </button>
                        </div>
                    </div>

            <div class="visitor-table-container">
                <table class="visitor-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Type</th>
                            <th>Date</th>
                            <th>Time</th>
                            <th>Source</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="visitorTableBody">
                        <!-- Visitor records will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Analytics Section -->
        <div class="analytics-section">
            <!-- Visitor Analytics Chart -->
            <div class="chart-container">
                <div class="chart-header">
                    <h3><i class="fas fa-chart-bar"></i> Visitor Analytics</h3>
                    <div class="chart-controls">
                        <button class="chart-btn active" id="dailyBtn" onclick="visitorManager.toggleChart('daily')">Daily</button>
                        <button class="chart-btn" id="monthlyBtn" onclick="visitorManager.toggleChart('monthly')">Monthly</button>
                    </div>
                </div>
                <div class="chart-wrapper">
                    <canvas id="visitorChart"></canvas>
                </div>
            </div>

            <!-- Visitor Sources Chart -->
            <div class="chart-container">
                <div class="chart-header">
                    <h3><i class="fas fa-chart-pie"></i> Visitor Sources</h3>
                </div>
                <div class="chart-wrapper">
                    <canvas id="sourcesChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Visitor Modal -->
    <div class="modal" id="addVisitorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> Add New Visitor</h3>
                <button class="btn-close" onclick="visitorManager.closeModal('addVisitorModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="addVisitorForm" onsubmit="visitorManager.handleAddVisitor(event)">
                <div class="form-group">
                    <label for="visitorType">Visitor Type *</label>
                    <select id="visitorType" name="visitorType" required onchange="visitorManager.toggleVisitorFields()">
                        <option value="">Select Type</option>
                        <option value="registered">Registered Customer</option>
                        <option value="unregistered">Unregistered Visitor</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="visitorName">Visitor Name *</label>
                    <input type="text" id="visitorName" name="visitorName" required>
                </div>
                <div class="form-group">
                    <label for="visitorEmail">Email Address *</label>
                    <input type="email" id="visitorEmail" name="visitorEmail" required>
                </div>
                <div class="form-group">
                    <label for="visitorSource">Source *</label>
                    <select id="visitorSource" name="visitorSource" required>
                        <option value="">Select Source</option>
                        <option value="website">Website</option>
                        <option value="social_media">Social Media</option>
                        <option value="referral">Referral</option>
                        <option value="walk_in">Walk-in</option>
                        <option value="event">Event</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="visitDate">Visit Date *</label>
                    <input type="date" id="visitDate" name="visitDate" required>
                </div>
                <div class="form-group">
                    <label for="visitTime">Visit Time *</label>
                    <input type="time" id="visitTime" name="visitTime" required>
                </div>
                <div class="form-group">
                    <label for="visitorNotes">Notes (Optional)</label>
                    <textarea id="visitorNotes" name="visitorNotes" rows="3" placeholder="Additional notes about the visitor..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="visitorManager.closeModal('addVisitorModal')">Cancel</button>
                    <button type="submit" class="btn-primary">Add Visitor</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Visitor Modal -->
    <div class="modal" id="editVisitorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-edit"></i> Edit Visitor</h3>
                <button class="btn-close" onclick="visitorManager.closeModal('editVisitorModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="editVisitorForm" onsubmit="visitorManager.handleEditVisitor(event)">
                <input type="hidden" id="editVisitorId" name="visitorId">
                <div class="form-group">
                    <label for="editVisitorType">Visitor Type *</label>
                    <select id="editVisitorType" name="visitorType" required onchange="visitorManager.toggleEditVisitorFields()">
                        <option value="registered">Registered Customer</option>
                        <option value="unregistered">Unregistered Visitor</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editVisitorName">Visitor Name *</label>
                    <input type="text" id="editVisitorName" name="visitorName" required>
                </div>
                <div class="form-group">
                    <label for="editVisitorEmail">Email Address *</label>
                    <input type="email" id="editVisitorEmail" name="visitorEmail" required>
                </div>
                <div class="form-group">
                    <label for="editVisitorSource">Source *</label>
                    <select id="editVisitorSource" name="visitorSource" required>
                        <option value="website">Website</option>
                        <option value="social_media">Social Media</option>
                        <option value="referral">Referral</option>
                        <option value="walk_in">Walk-in</option>
                        <option value="event">Event</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editVisitDate">Visit Date *</label>
                    <input type="date" id="editVisitDate" name="visitDate" required>
                </div>
                <div class="form-group">
                    <label for="editVisitTime">Visit Time *</label>
                    <input type="time" id="editVisitTime" name="visitTime" required>
                </div>
                <div class="form-group">
                    <label for="editVisitorNotes">Notes (Optional)</label>
                    <textarea id="editVisitorNotes" name="visitorNotes" rows="3" placeholder="Additional notes about the visitor..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="visitorManager.closeModal('editVisitorModal')">Cancel</button>
                    <button type="submit" class="btn-primary">Update Visitor</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Message Container -->
    <div class="message-container" id="messageContainer"></div>

            </div>
        </main>
    </div>

    <script src="visitor-records-script.js"></script>
</body>
</html>
